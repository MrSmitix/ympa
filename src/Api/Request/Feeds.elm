{-
   Партнерский API Маркета
   API Яндекс Маркета помогает продавцам автоматизировать и упростить работу с маркетплейсом.  В числе возможностей интеграции:  * управление каталогом товаров и витриной,  * обработка заказов,  * изменение настроек магазина,  * получение отчетов. 

   The version of the OpenAPI document: LATEST

   NOTE: This file is auto generated by the openapi-generator.
   https://github.com/openapitools/openapi-generator.git

   DO NOT EDIT THIS FILE MANUALLY.

   For more info on generating Elm code, see https://eriktim.github.io/openapi-elm/
-}


module Api.Request.Feeds exposing
    ( getFeed
    , getFeedIndexLogs
    , getFeeds
    , refreshFeed
    , setFeedParams
    )

import Api
import Api.Data exposing (..)
import Api.Time exposing (Posix)
import Dict
import Http
import Json.Decode
import Json.Encode

{-| {% note warning \"\" %}  Этот метод устарел. Не используйте его.  {% endnote %}  Возвращает информацию о прайс-листе, размещенном на Маркете для заданного магазина. Также ресурс возвращает результаты автоматических проверок прайс-листа. |**⚙️ Лимит:** 1000 запросов в час| |-| 
-}
getFeed : Int -> Int -> Api.Request Api.Data.GetFeedResponse
getFeed campaignId_path feedId_path =
    Api.request
        "GET"
        "/campaigns/{campaignId}/feeds/{feedId}"
        [ ( "campaignId", String.fromInt campaignId_path ), ( "feedId", String.fromInt feedId_path ) ]
        []
        []
        Nothing
        Api.Data.getFeedResponseDecoder


{-| {% note warning \"\" %}  Этот метод устарел. Не используйте его.  {% endnote %}  Возвращает отчет по индексации прайс-листа для заданного магазина. Отчет позволяет получить статистику загрузки прайс-листа и результаты его автоматических проверок.  Данные в отчете возвращаются в порядке убывания значений параметра `generationId`.  |**⚙️ Лимит:** 1 000 запросов в час| |-| 
-}
getFeedIndexLogs : Int -> Int -> Maybe Int -> Maybe Posix -> Maybe Posix -> Maybe FeedIndexLogsStatusType -> Api.Request Api.Data.GetFeedIndexLogsResponse
getFeedIndexLogs campaignId_path feedId_path limit_query publishedTimeFrom_query publishedTimeTo_query status_query =
    Api.request
        "GET"
        "/campaigns/{campaignId}/feeds/{feedId}/index-logs"
        [ ( "campaignId", String.fromInt campaignId_path ), ( "feedId", String.fromInt feedId_path ) ]
        [ ( "limit", Maybe.map String.fromInt limit_query ), ( "published_time_from", Maybe.map Api.Time.dateTimeToString publishedTimeFrom_query ), ( "published_time_to", Maybe.map Api.Time.dateTimeToString publishedTimeTo_query ), ( "status", Maybe.map Api.Data.stringFromFeedIndexLogsStatusType status_query ) ]
        []
        Nothing
        Api.Data.getFeedIndexLogsResponseDecoder


{-| {% note warning \"\" %}  Этот метод устарел. Не используйте его.  {% endnote %}  Возвращает список прайс-листов, размещенных на Маркете для магазина. Также ресурс возвращает результаты автоматических проверок прайс-листов. |**⚙️ Лимит:** 1000 запросов в час| |-| 
-}
getFeeds : Int -> Api.Request Api.Data.GetFeedsResponse
getFeeds campaignId_path =
    Api.request
        "GET"
        "/campaigns/{campaignId}/feeds"
        [ ( "campaignId", String.fromInt campaignId_path ) ]
        []
        []
        Nothing
        Api.Data.getFeedsResponseDecoder


{-| {% note warning \"\" %}  Этот метод устарел. Не используйте его.  {% endnote %}  Позволяет сообщить, что магазин обновил прайс-лист. После этого Маркет начнет обновление данных на сервисе. 1. Магазин обновляет прайс-лист, ссылку на который он указал в кабинете. 2. Магазин отправляет Маркету запрос методом `POST campaigns/{campaignId}/feeds/{feedId}/refresh`. 3. Маркет начинает обновление данных магазина на сервисе.  {% note alert %}  Запрос работает только для включенных магазинов. Если магазин выключен, данные на Маркете не обновятся, даже если HTTP-код — `200 OK`. Проверить статус магазина можно с помощью базовых запросов или на странице бизнес-аккаунта.  {% endnote %}  |**⚙️ Лимит:** 3 запроса в час для одного прайс-листа| |-| 
-}
refreshFeed : Int -> Int -> Api.Request Api.Data.EmptyApiResponse
refreshFeed campaignId_path feedId_path =
    Api.request
        "POST"
        "/campaigns/{campaignId}/feeds/{feedId}/refresh"
        [ ( "campaignId", String.fromInt campaignId_path ), ( "feedId", String.fromInt feedId_path ) ]
        []
        []
        Nothing
        Api.Data.emptyApiResponseDecoder


{-| {% note warning \"\" %}  Этот метод устарел. Не используйте его.  {% endnote %}  Позволяет магазину изменить параметры прайс-листа.  Чтобы отредактировать параметр прайс-листа, передайте в теле запроса: `name` (название параметра) и `value` (значение параметра).  Чтобы отменить установленное значение, передайте в теле запроса: `name` (название параметра) и `delete=true` (удалить значение).  |**⚙️ Лимит:** 3 запроса в час для одного прайс-листа| |-| 
-}
setFeedParams : Int -> Int -> Api.Data.SetFeedParamsRequest -> Api.Request Api.Data.EmptyApiResponse
setFeedParams campaignId_path feedId_path setFeedParamsRequest_body =
    Api.request
        "POST"
        "/campaigns/{campaignId}/feeds/{feedId}/params"
        [ ( "campaignId", String.fromInt campaignId_path ), ( "feedId", String.fromInt feedId_path ) ]
        []
        []
        (Maybe.map Http.jsonBody (Just (Api.Data.encodeSetFeedParamsRequest setFeedParamsRequest_body)))
        Api.Data.emptyApiResponseDecoder

